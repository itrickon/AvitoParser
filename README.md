# ___AvitoParser___
<a id='readme-top'></a>
Desktop-приложение для анализа данных, предназначенное для сбора информации из объявлений.

## Безопасность и соблюдение правил

#### **Данный инструмент предназначен для сбора открытой информации в образовательных и исследовательских целях.** 

### Рекомендуется:  
- Ознакомиться с условиями использования

- Использовать инструмент ответственно и в соответствии с законодательством

- Не использовать для спама или нарушения правил

### Возможности:
Четыре режима работы:

- Поиск объявлений по ключевому слову и городу

- Поиск объявлений по прямой ссылке

- Парсинг номеров телефонов из объявлений

- Декодирование изображений с телефонами


### Программное обеспечение:

Что нужно:  

- Python: версия 3.11 или выше  

- Tesseract OCR: для распознавания текста с изображений

- Google Chrome: браузер для автоматизации

- Подключение к интернету

- Учетная запись

### Установка  

Установите Python:

- Запустите python_installer_1.bat или скачайте Python с официального сайта ([ссылка на сайт](https://www.python.org/))
- Отметьте галочкой "**Use admin privileges when installing py.exe**"
- Отметьте галочкой "**Add python.exe to PATH**"
- Нажмите на кнопку "**Install Now**"
- После загрузки появится "**Setup was successful**", нажмите на кнопку "**Close**"

### Установите Tesseract OCR:

- Скачайте установщик для Windows: ([ссылка на сайт](https://github.com/UB-Mannheim/tesseract/wiki)) или используйте tesseract-ocr-w64-setup-5.5.0.20241111.exe находящийся в папке
- Установите в папку: C:\Program Files\Tesseract-OCR\

### Способ 1: 

- Запустите **avitoparser_installer_2.bat**
- Дождитесь установки зависимостей и сборки EXE-файла
- На рабочем столе появится ярлык **AvitoParser**
- Запустите **AvitoParser**
- Используйте графический интерфейс как описано в **способе 2**(без запуска gui.py)  

### Способ 2: 

- Запустите **gui.py**
- В **'Поиск объявлений'** записываем нужные город и ключевое слово для поиска. Записываем нужное количество фирм. Нажимаем начать парсинг.  
Если парсинг не работает, то запускаем **'Поиск объявлений по URL'**, также выбираем нужное количество фирм. Нажимаем начать парсинг.
- В **'Поиск телефонов'** выбираем нужны Excel файл с объявлениями для поиска телефонов. Выбираем нужное количество телефонов.  
Так же можно использовать **'Парсинг'** -> **'Открыть Excel файл'** для загрузки Excel  
Чтобы сразу получить Excel файл с телефонами ставим галочку на 'Включить декодирование изображений' Нажимаем начать парсинг.
Если парсинг прервался и вы хотите продолжить, нажимаем 'Продолжить парсинг'
- В **'Декодирование изображений'** мы нажимаем 'Начать парсинг', если изначально не поставили галочку в 'Включить декодирование изображений'. Если файл находится в другом месте, то мы выбираем нужный Excel файл с недекодированными изображениями и нажимаем начать парсинг.
Так же можно использовать **'Парсинг'** -> **'Открыть JSON файл'** для загрузки JSON  
- После завершения парсинга мы переходим в **'Экспорт'** -> **'Экспорт готового файла'** и выбираем папку, куда декодировать. **Готово!**

  - **'Справка'** -> **'Руководство пользователя'** переносит на страницу GitHub с файлом **README**
  - **'Справка'** -> **'Горячие клавиши'** открывает окно с горячими клавишами
  - **'Справка'** -> **'Очистить папку debug'** используется для очистки папки с ошибками
  - **'Справка'** -> **'О программе'** выводит данные о программе

### Способ 3:

- Откройте cmd/terminal (или текстовый редактор где можно вписать):   
`pip install sv-ttk, pyinstaller, deep_translator, playwright, openpyxl`  
`pip install pandas, pillow, pytesseract, asyncio`  
- Если хотите найти объявления, то запустите **search_ads.py** и в функции main напишите город(city) в котором хотите искать и слово(kword) - что искать.
- Если хотите найти номера в полученных объявлениях, то запустите **phone_search**, и в main измените input_file, вставьте название своего файла с расширением(.xlsx)  
- Полученный результат из phone_search можно декодировать в **decode_photos**.py, чтобы получшить .xlsx файл  

### Горячие клавиши  
Для быстрой работы используйте сочетания клавиш:

|Сочетание|	Действие|
|-|-
|Ctrl + O|	Открыть Excel файл|
|Ctrl + P|	Открыть JSON файл|
|Ctrl + S|	Остановить парсинг|
|Ctrl + L|	Очистить лог|
|Ctrl + Q|	Выйти из программы|
|Ctrl + G|	Сгенерировать URL|
|F1	|Руководство пользователя|

Особенности работы
1. Имитация человеческого поведения
   - Случайные задержки между действиями

   - Естественные движения мыши

   - Плавная прокрутка страниц

   - Ротация User-Agent для обхода ограничений

2. Обработка ошибок
   - Автоматическое восстановление при сбоях сети

   - Сохранение прогресса при прерывании

   - Подробное логирование всех операций

3. Обход ограничений Avito
   - Поддержка ручной авторизации

   - Обработка капчи (требует ручного вмешательства)

   - Обход лимитов на просмотр контактов

4. Распознавание изображений
   - Автоматическое декодирование base64 изображений

   - Распознавание текста через Tesseract OCR

   - Фильтрация ложных срабатываний

## Устранение неполадок
### Если парсер не запускается:
Проверьте установку Python:

- `python --version`  
Должна отобразиться версия 3.11 или выше

- Проверьте установку Tesseract:  
Убедитесь, что файл tesseract.exe существует по пути: **C:\Program Files\Tesseract-OCR\\**  
Или измените путь в коде: **строка 31 в gui.py**

### Если парсинг не работает:  
- Проверьте подключение к интернету

- Проверьте параметры поиска:

  - Для режима по ключу: город должен быть на русском

  - Для режима по URL: URL должен быть в правильном формате

- Проверьте авторизацию в Avito:

  - При сборе телефонов может потребоваться вход в аккаунт

  - Нажмите "Вход выполнен" только после успешного входа

- Очистите кэш браузера:

  - Закройте все окна Chrome

  - Запустите парсинг заново

Для обхода ограничений:
- Используйте авторизованный аккаунт - у него больше лимитов

- Чередуйте режимы работы - поиск объявлений → сбор телефонов → перерыв

- Используйте разные города - если один город вызывает проблемы

Для работы с изображениями:
- Убедитесь в правильной установке Tesseract

## Поддержка и обратная связь
### При возникновении проблем:
#### Соберите информацию:

- Версия программы (в меню "О программе")
- Текст ошибки из лога
- Скриншот проблемы в папке debug

### Создайте issue на GitHub:

#### Укажите:

- Описание проблемы
- Шаги для воспроизведения
- Скриншоты или логи
- Версию Python и установленные пакеты

**Важно:** Данный инструмент предназначен исключительно для образовательных и исследовательских целей. Используйте его ответственно и в рамках действующего законодательства. Разработчик не несет ответственности за неправомерное использование программы.
<p align='right'>
  <a href='#readme-top'>Back to top</a>
</p>